@model IEnumerable<Wiki.OTK_Reclamation>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<head>
    <link href="~/Content/Scripts/bootstrap-table.min.css" rel="stylesheet" />
    <link href="~/Content/Scripts/bootstrap.min.css" rel="stylesheet" />
    <style>
        .container {
            height: 650px;
            width: 1600px;
            overflow: auto;
        }

        th {
            background: #000080; /* Цвет фона строки заголовка */
            color: #ffe; /* Цвет текста */
            text-align: left; /* Выравнивание по левому краю */
            font-family: Arial, Helvetica, sans-serif; /* Выбор гарнитуры */
            font-size: 0.9em; /* Размер текста */
        }

        .form-control {
            max-width: none !important;
            width: 970px;
        }
    </style>
</head>
<h4>Чек-листы</h4>
<span>
    @Html.ActionLink("Создать", "Create", null, new { @class = "btn-sm btn-info" })
    @Html.ActionLink("Чек-листы", "Index", "OTK_ChaeckList", new { myDevision = ViewBag.myId }, new { @class = "btn-sm btn-primary" })
    @Html.ActionLink("В работе (не отгружены)", "ListActiveWork", "OTK_Reclamation", null, new { @class = "btn-sm btn-primary" })
    @Html.ActionLink("Не закрытые (отгружены)", "ListDeactiveWork", "OTK_Reclamation", null, new { @class = "btn-sm btn-primary" })
    @Html.ActionLink("Квартальный отчет", "QuaReport", "OTK_ChaeckList", new { myDevision = ViewBag.myId }, new { @class = "btn-sm btn-primary" })
    <br />
    <br />
    <input class="form-control" id="myInput" type="text" placeholder="Поиск...">
</span>
<br />
<div class="container">
    <table data-toggle="table" data-height="650">
        <thead>
            <tr>
                <th> Ред. </th>
                <th width="10"> № </th>
                <th width="10"> Заказ </th>
                <th width="250"> Тип </th>
                <th width="10"> Закрыта </th>
                <th width="300"> Рекламация </th>
                <th width="150"> Прим. </th>
                <th width="10"> Тр-ты ОТК </th>
                <th width="10"> Тр-ты ПУ </th>
                <th width="250"> Ответ </th>
                <th width="50"> СП </th>
                <th width="100"> Открыта </th>
                <th width="100"> Ответ от </th>
                <th> Уд. </th>
            </tr>
        </thead>
        <tbody id="myTable">
            @foreach (var item in Model)
            {
                if (item.AnswerText == "")
                {
            <tr class="danger">
                <td>@Html.ActionLink("Ред.", "EditPartialActive", "OTK_Reclamation", new { id = item.Id, cl = item.OTK_ChaeckList.id }, new { @class = "viewDialog", data_dialog_title = "Изменить запись" })</td>
                <td width="10"> @Html.DisplayFor(modelItem => item.Id) </td>
                <td width="10"> @Html.DisplayFor(modelItem => item.OTK_ChaeckList.PZ_PlanZakaz.PlanZakaz) </td>
                <td width="250"> @Html.DisplayFor(modelItem => item.OTK_TypeReclamation.Name) </td>
                <td width="10"> @Html.DisplayFor(modelItem => item.Complited) </td>
                <td width="300"> @Html.DisplayFor(modelItem => item.ReclamationText) </td>
                <td width="150"> @Html.DisplayFor(modelItem => item.Description) </td>
                <td width="10"> @Html.DisplayFor(modelItem => item.LaborCostOTK) </td>
                <td width="10"> @Html.DisplayFor(modelItem => item.LaborCostManufacturing) </td>
                <td width="250"> @Html.DisplayFor(modelItem => item.AnswerText) </td>
                <td width="50"> @Html.DisplayFor(modelItem => item.Devision1.name) </td>
                <td width="100"> @item.DateTimeCreate.ToString() </td>
                <td width="100"> @item.AnswerDate.ToString() </td>
                <td> @Html.ActionLink("Уд.", "Delete", new { id = item.Id, cl = item.OTK_ChaeckList.id }, null) </td>
            </tr>
                }
                else if (item.Complited == true)
                {
            <tr>
                <td>@Html.ActionLink("Ред.", "EditPartialActive", "OTK_Reclamation", new { id = item.Id, cl = item.OTK_ChaeckList.id }, new { @class = "viewDialog", data_dialog_title = "Изменить запись" })</td>
                <td width="10"> @Html.DisplayFor(modelItem => item.Id) </td>
                <td width="10"> @Html.DisplayFor(modelItem => item.OTK_ChaeckList.PZ_PlanZakaz.PlanZakaz) </td>
                <td width="250"> @Html.DisplayFor(modelItem => item.OTK_TypeReclamation.Name) </td>
                <td width="10"> @Html.DisplayFor(modelItem => item.Complited) </td>
                <td width="300"> @Html.DisplayFor(modelItem => item.ReclamationText) </td>
                <td width="150"> @Html.DisplayFor(modelItem => item.Description) </td>
                <td width="10"> @Html.DisplayFor(modelItem => item.LaborCostOTK) </td>
                <td width="10"> @Html.DisplayFor(modelItem => item.LaborCostManufacturing) </td>
                <td width="250"> @Html.DisplayFor(modelItem => item.AnswerText) </td>
                <td width="50"> @Html.DisplayFor(modelItem => item.Devision1.name) </td>
                <td width="100"> @item.DateTimeCreate.ToString() </td>
                <td width="100"> @item.AnswerDate.ToString() </td>
                <td> @Html.ActionLink("Уд.", "Delete", new { id = item.Id, cl = item.OTK_ChaeckList.id }, null) </td>
            </tr>
                }
                else
                {
            <tr class="warning">
                <td>@Html.ActionLink("Ред.", "EditPartialActive", "OTK_Reclamation", new { id = item.Id, cl = item.OTK_ChaeckList.id }, new { @class = "viewDialog", data_dialog_title = "Изменить запись" })</td>
                <td width="10"> @Html.DisplayFor(modelItem => item.Id) </td>
                <td width="10"> @Html.DisplayFor(modelItem => item.OTK_ChaeckList.PZ_PlanZakaz.PlanZakaz) </td>
                <td width="250"> @Html.DisplayFor(modelItem => item.OTK_TypeReclamation.Name) </td>
                <td width="10"> @Html.DisplayFor(modelItem => item.Complited) </td>
                <td width="300"> @Html.DisplayFor(modelItem => item.ReclamationText) </td>
                <td width="150"> @Html.DisplayFor(modelItem => item.Description) </td>
                <td width="10"> @Html.DisplayFor(modelItem => item.LaborCostOTK) </td>
                <td width="10"> @Html.DisplayFor(modelItem => item.LaborCostManufacturing) </td>
                <td width="250"> @Html.DisplayFor(modelItem => item.AnswerText) </td>
                <td width="50"> @Html.DisplayFor(modelItem => item.Devision1.name) </td>
                <td width="100"> @item.DateTimeCreate.ToString() </td>
                <td width="100"> @item.AnswerDate.ToString() </td>
                <td> @Html.ActionLink("Уд.", "Delete", new { id = item.Id, cl = item.OTK_ChaeckList.id }, null) </td>
            </tr>
                }
            }
        </tbody>
    </table>
</div>

<script>
    $(document).ready(function () {
        $("#myInput").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            $("#myTable tr").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
        });
    });
</script>

<script>
    $('table').tfh({
        trigger: 0,
        top: 0
    });
</script>


<script src="~/Content/Scripts/bootstrap-table.min.js"></script>
<script src="~/Content/Scripts/jquery.min.js"></script>

<script>
    $(document).ready(function () {
        $('table tr').on('click', function (e) {
            $('table tr').removeClass('marked');
            $(this).addClass('marked');
        });
    });
</script>


<script>
    $('#myLink').click(function (
    ) {
    }
    );

</script>
<script src='@Url.Content("~/Scripts/jquery-3.1.1.min.js")' type="text/javascript"></script>
<script src='@Url.Content("~/Scripts/jquery-ui-1.12.1.min.js")' type="text/javascript"></script>
<script>
    $(document).ready(function () {
        $.ajaxSetup({ cache: false });
        $(".viewDialog").on("click", function (e) {
            e.preventDefault();
            $("<div></div>")
                .addClass("dialog")
                .appendTo("body")
                .dialog({
                    title: $(this).attr("data-dialog-title"),
                    close: function () { $(this).remove() },
                    width: 1200,
                    height: 700,
                    modal: true
                })
                .load(this.href);
        });
    });
</script>
<script>
    $(document).ready(function () {
        $.ajaxSetup({ cache: false });
        $(".viewDialog1").on("click", function (e) {
            e.preventDefault();
            $("<div></div>")
                .addClass("dialog")
                .appendTo("body")
                .dialog({
                    title: $(this).attr("data-dialog-title"),
                    close: function () { $(this).remove() },
                    width: 650,
                    height: 740,
                    modal: true
                })
                .load(this.href);
        });
    });
</script>